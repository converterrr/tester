-- Load the Spawner library
local Spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/ataturk123/GardenSpawner/main/Spawner.lua"))()

-- Show the original default UI
Spawner.Load()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Create custom GUI
local gui = Instance.new("ScreenGui")
gui.Name = "CustomSpawnerUI"
gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(1, -310, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.BorderSizePixel = 0

-- Title
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Custom Spawner"
title.Font = Enum.Font.SourceSansBold
title.TextSize = 24
title.TextColor3 = Color3.new(1, 1, 1)

-- Category dropdown
local categories = {"Pet", "Seed", "Mutation"}
local selectedCategory = nil

local catDropdown = Instance.new("TextButton", frame)
catDropdown.Size = UDim2.new(0, 280, 0, 30)
catDropdown.Position = UDim2.new(0, 10, 0, 50)
catDropdown.Text = "Select Category"
catDropdown.Font = Enum.Font.SourceSans
catDropdown.TextSize = 18
catDropdown.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
catDropdown.TextColor3 = Color3.new(1, 1, 1)

local dropdownFrame = Instance.new("Frame", frame)
dropdownFrame.Size = UDim2.new(0, 280, 0, 90)
dropdownFrame.Position = UDim2.new(0, 10, 0, 80)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
dropdownFrame.Visible = false
dropdownFrame.BorderSizePixel = 0

local UIListLayout = Instance.new("UIListLayout", dropdownFrame)
UIListLayout.Padding = UDim.new(0, 4)

for i, cat in ipairs(categories) do
    local btn = Instance.new("TextButton", dropdownFrame)
    btn.Size = UDim2.new(1, 0, 0, 25)
    btn.Text = cat
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 18
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.MouseButton1Click:Connect(function()
        selectedCategory = cat
        catDropdown.Text = cat
        dropdownFrame.Visible = false
        refreshList()
    end)
end

catDropdown.MouseButton1Click:Connect(function()
    dropdownFrame.Visible = not dropdownFrame.Visible
end)

-- Search box
local searchBox = Instance.new("TextBox", frame)
searchBox.Size = UDim2.new(0, 280, 0, 30)
searchBox.Position = UDim2.new(0, 10, 0, 180)
searchBox.PlaceholderText = "Search..."
searchBox.Font = Enum.Font.SourceSans
searchBox.TextSize = 18
searchBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
searchBox.TextColor3 = Color3.new(1, 1, 1)

-- Scroll frame for items
local scroll = Instance.new("ScrollingFrame", frame)
scroll.Size = UDim2.new(0, 280, 0, 150)
scroll.Position = UDim2.new(0, 10, 0, 220)
scroll.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
scroll.BorderSizePixel = 0
scroll.ScrollBarThickness = 6

local listLayout = Instance.new("UIListLayout", scroll)
listLayout.Padding = UDim.new(0, 4)

-- Input boxes for weight, age, qty
local weightBox = Instance.new("TextBox", frame)
weightBox.Size = UDim2.new(0, 85, 0, 30)
weightBox.Position = UDim2.new(0, 10, 0, 380)
weightBox.PlaceholderText = "Weight"
weightBox.Text = "1"
weightBox.Font = Enum.Font.SourceSans
weightBox.TextSize = 18
weightBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
weightBox.TextColor3 = Color3.new(1, 1, 1)

local ageBox = Instance.new("TextBox", frame)
ageBox.Size = UDim2.new(0, 85, 0, 30)
ageBox.Position = UDim2.new(0, 105, 0, 380)
ageBox.PlaceholderText = "Age"
ageBox.Text = "1"
ageBox.Font = Enum.Font.SourceSans
ageBox.TextSize = 18
ageBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ageBox.TextColor3 = Color3.new(1, 1, 1)

local qtyBox = Instance.new("TextBox", frame)
qtyBox.Size = UDim2.new(0, 85, 0, 30)
qtyBox.Position = UDim2.new(0, 200, 0, 380)
qtyBox.PlaceholderText = "Qty"
qtyBox.Text = "1"
qtyBox.Font = Enum.Font.SourceSans
qtyBox.TextSize = 18
qtyBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
qtyBox.TextColor3 = Color3.new(1, 1, 1)

-- Spawn button
local spawnBtn = Instance.new("TextButton", frame)
spawnBtn.Size = UDim2.new(0, 280, 0, 40)
spawnBtn.Position = UDim2.new(0, 10, 0, 420)
spawnBtn.Text = "Spawn"
spawnBtn.Font = Enum.Font.SourceSansBold
spawnBtn.TextSize = 22
spawnBtn.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
spawnBtn.TextColor3 = Color3.new(1, 1, 1)

-- Item list for current category
local currentItems = {}

-- Function to get items based on category
local function getItemsForCategory(cat)
    if cat == "Pet" then
        return Spawner.GetPets()
    elseif cat == "Seed" then
        return Spawner.GetSeeds()
    elseif cat == "Mutation" then
        return {
            "Gold","Rainbow","Wet","Chilled","Frozen","Moonlit","Bloodlit","Shocked",
            "Celestial","Dawnbound","Choc","Pollinated","Burnt","Cooked","HoneyGlazed",
            "Plasma","Heavenly","Zombified","Molten","Disco","Voidtouched"
        }
    else
        return {}
    end
end

-- Clear scroll list
local function clearList()
    for _, child in ipairs(scroll:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
end

local selectedItem = nil

-- Refresh item list
function refreshList()
    clearList()
    selectedItem = nil
    if not selectedCategory then return end

    local allItems = getItemsForCategory(selectedCategory)
    local filter = searchBox.Text:lower()
    currentItems = {}

    for _, item in ipairs(allItems) do
        if item:lower():find(filter) then
            table.insert(currentItems, item)
        end
    end

    for _, itemName in ipairs(currentItems) do
        local btn = Instance.new("TextButton", scroll)
        btn.Size = UDim2.new(1, 0, 0, 25)
        btn.Text = itemName
        btn.Font = Enum.Font.SourceSans
        btn.TextSize = 18
        btn.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
        btn.TextColor3 = Color3.new(1, 1, 1)
        btn.MouseButton1Click:Connect(function()
            selectedItem = itemName
            for _, sibling in ipairs(scroll:GetChildren()) do
                if sibling:IsA("TextButton") then
                    sibling.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
                end
            end
            btn.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
        end)
    end
end

-- Connect search box change
searchBox:GetPropertyChangedSignal("Text"):Connect(refreshList)

-- Spawn button logic
spawnBtn.MouseButton1Click:Connect(function()
    if not selectedItem or not selectedCategory then
        warn("Select a category and item first!")
        return
    end

    local weight = tonumber(weightBox.Text) or 1
    local age = tonumber(ageBox.Text) or 1
    local qty = tonumber(qtyBox.Text) or 1

    if selectedCategory == "Pet" then
        for i=1, qty do
            Spawner.SpawnPet(selectedItem, weight, age)
        end
    elseif selectedCategory == "Seed" then
        for i=1, qty do
            Spawner.SpawnSeed(selectedItem)
        end
    elseif selectedCategory == "Mutation" then
        for i=1, qty do
            Spawner.Spin(selectedItem)
        end
    end
end)

-- Initial refresh
refreshList()
